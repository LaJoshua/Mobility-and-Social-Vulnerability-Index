# Install the packages (you only need to do this once)
install.packages("plotly")
install.packages("dplyr")
install.packages("readr")
install.packages("tidyverse")

# Load the packages
library(plotly)
library(dplyr)
library(readr)
library(tidyverse)

states <- read.csv("/Users/joshuaharrell/Desktop/HPCintheCity/MSV/newstates.csv") %>%
  rename(State = state)

svi_df <- read.csv("/Users/joshuaharrell/Desktop/HPCintheCity/MSV/sviTraviscopy.csv") %>%
  left_join(states, by = 'State') %>%
  select(Zip,SVI,code)

austin_map = plot_geo(svi_df, 
                      locationmode = 'USA-states', 
                      frame = ~Zip ) %>%
  add_trace(locations = ~code, 
            z = ~SVI, 
            color = ~SVI) %>%
  layout(geo = list(scope = 'usa'))

austin_map

load("/Users/joshuaharrell/Desktop/HPCintheCity/MSV/ACS_2019_ZCTA_pop_polygon.rda")
new <- zip_pop_geo %>% 
  as.data.frame() %>%
  filter(GEOID  %in% svi_df$Zip)

glimpse(zip_pop_geo)
